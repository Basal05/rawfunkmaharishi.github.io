<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
<meta http-equiv='X-UA-Compatible' content='IE=edge' />
<meta name='viewport' content='width=device-width, initial-scale=1' />

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js'></script>
  <script src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js'></script>
<![endif]-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56995544-1', 'auto');
  ga('send', 'pageview');

</script>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src='/javascript/bootstrap.js'></script>


    <link rel='icon' type='image/png' href='/assets/favicon.ico' />
    <link rel='stylesheet' href='/assets/application.css' type='text/css' />
    <style></style>
    
    
    <title>Including Sounds From Soundcloud</title>

    





<meta property="og:title" content="Raw Funk Maharishi » Including Sounds From Soundcloud" />
<meta property="og:site_name" content="Raw Funk Maharishi" />
<meta property="og:url" content="http://rawfunkmaharishi.uk/blog/2014/11/17/including-sounds-from-soundcloud/" />
<meta property="og:description" content="Raw Funk Maharishi, exploring the deep funk grooves of the 70s, fused with improvised avant-groove jams" />
<meta property="og:type" content="article" />
<meta property="og:image" content="http://rawfunkmaharishi.uk/assets/images/logos/wide/header_green.png" />


  </head>

  <body>
    
      <div class='header '>
  <div class='container header-container'>
    <div class='row'>
      <div class='col-md-4 col-md-push-8'>
        <nav class='navbar navbar-default' role='navigation'>
  <!-- Brand and toggle get grouped for better mobile display -->
<div class='navbar-header'>
  <button type='button' class='navbar-toggle collapsed' data-toggle='collapse' data-target='#navbar-collapse'>
    <span class='sr-only'>Toggle navigation</span>
    <span class='icon-bar'></span>
    <span class='icon-bar'></span>
    <span class='icon-bar'></span>
  </button>
</div>

  <div class='collapse navbar-collapse' id='navbar-collapse'>

    <!-- mobile -->
    <ul class='nav hidden-md hidden-lg mobile' role='tablist'>
      
        <li>
  <a href='/the-band/'>The Band</a>
</li>

      
        <li>
  <a href='/sounds/'>Sounds</a>
</li>

      
        <li>
  <a href='/pictures/'>Pictures</a>
</li>

      
        <li>
  <a href='/videos/'>Videos</a>
</li>

      
        <li>
  <a href='/gigs/'>Gigs</a>
</li>

      
        <li>
  <a href='/book-the-band/'>Bookings</a>
</li>

      
        <li>
  <a href='/feedback/'>Reviews</a>
</li>

      
        <li>
  <a href='/merchandise/'>Merchandise</a>
</li>

      
        <li>
  <a href='/licensing/'>Licensing</a>
</li>

      
    </ul>

    <!-- desktop -->
    <ul class='nav nav-stacked nav-pills pull-right hidden-xs hidden-sm' role='tablist'>
      
        <li>
  <a href='/the-band/'>The Band</a>
</li>

      
        <li>
  <a href='/sounds/'>Sounds</a>
</li>

      
        <li>
  <a href='/pictures/'>Pictures</a>
</li>

      
        <li>
  <a href='/videos/'>Videos</a>
</li>

      
        <li>
  <a href='/gigs/'>Gigs</a>
</li>

      
        <li>
  <a href='/book-the-band/'>Bookings</a>
</li>

      
        <li>
  <a href='/feedback/'>Reviews</a>
</li>

      
        <li>
  <a href='/merchandise/'>Merchandise</a>
</li>

      
        <li>
  <a href='/licensing/'>Licensing</a>
</li>

      
    </ul>
  </div>
</nav>

      </div>

      <div class='col-md-8 col-md-pull-4 hidden-sm'>
        <a href='/'>
          <img src='/assets/images/logos/wide/banner.png' alt='Raw Funk Maharishi' class='logo'/>
        </a>
      </div>

      <div class='col-md-8 col-md-pull-4 visible-sm'>
        <a href='/'>
          <img src='/assets/images/logos/wide/banner.png' alt='Raw Funk Maharishi' class='little-logo'/>
        </a>
      </div>
    </div>
  </div>
</div>

    
    
    <div class='container'>
      
        
        
        <h1 class='main-title'>Including Sounds From Soundcloud</h1>
      
      <p>A band site needs music, right? We have a load of tracks up on <a href="https://soundcloud.com/rawfunkmaharishi">SoundCloud</a>, and they make <a href="http://rawfunkmaharishi.uk/sounds/">embedding</a> pretty easy. The default embeddable iframe is pretty bloody ugly, though:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;iframe width="100%" height="450" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/174628735&amp;amp;auto_play=false&amp;amp;hide_related=false&amp;amp;show_comments=true&amp;amp;show_user=true&amp;amp;show_reposts=false&amp;amp;visual=true"&gt;&lt;/iframe&gt;
</code></pre>
</div>

<p>So, armed with my vanishingly small armoury of JavaScript skills, I set about looking for a more elegant solution.</p>

<h2 id="oembed">oEmbed</h2>

<p>According to <a href="https://developers.soundcloud.com/docs/oembed">this page</a>, <em>oEmbed is an open standard to easily embed content from oEmbed providers into your site</em>, which seems to be <em>exactly</em> what we’re after. So I lashed together <a href="https://github.com/rawfunkmaharishi/rawfunkmaharishi.github.io/blob/master/_includes/oembed-sound.html">this include</a> from various bits and pieces I found around the place:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;div class='col-md-{{ include.width }}'&gt;
  &lt;div class='thumbnail'&gt;
    &lt;div class='embed-responsive embed-responsive-16by9'
         id='player-{{ include.id }}'&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- More John Frum action --&gt;
&lt;script&gt;
  $(document).ready(function() {
    SC.get(
      '/tracks/{{ include.id }}',
      function(track) {
      SC.oEmbed(
        track.permalink_url,
        document.getElementById('player-{{ include.id }}')
      );
    });
  });
&lt;/script&gt;
</code></pre>
</div>

<p>and do you know what? IT ACTUALLY WORKED. Yes, I was as surprised as anyone. You can see it in action <a href="http://rawfunkmaharishi.uk/oembed-sounds/">here</a>.</p>

<h2 id="i-do-not-think-this-word-means-what-you-think-it-means">I do not think this word means what you think it means</h2>

<p>Except it didn’t quite work properly. It was all good on my desktop browsers, and it responded properly when I squished Chrome down to phone-size, but on an actual phone, NOTHING. We tried it on Android Chrome, the default Android Webkit browser, and on an iPhone, and those iframes refused to show their faces.</p>

<p>Until I forced my Android browsers to ‘Request Desktop Site’, and then everything worked as expected.</p>

<p>I contacted SoundCloud about this, and while they were very nice, their response was basically ‘The API is working as expected’, which I guess is true. I can only conclude that this is some horrible nexus of Flash, HTML5 and User-Agents, and life is too short to dig into that, so I hacked together another <a href="https://github.com/rawfunkmaharishi/rawfunkmaharishi.github.io/blob/master/_includes/sound.html">awesome include</a> to tidy up the horror show and contain it all in one place:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">assign</span><span class="w"> </span><span class="err">auto_play</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">false</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">assign</span><span class="w"> </span><span class="err">hide_related</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">true</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">assign</span><span class="w"> </span><span class="err">show_comments</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">false</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">assign</span><span class="w"> </span><span class="err">show_user</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">false</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">assign</span><span class="w"> </span><span class="err">show_reposts=</span><span class="w"> </span><span class="err">false</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">assign</span><span class="w"> </span><span class="err">visual</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">true</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">assign</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">'https://w.soundcloud.com/player/'</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:'?url=https%3A//api.soundcloud.com/tracks/'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:include.id</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:'&amp;amp;auto_play='</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:auto_play</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:'&amp;amp;hide_related='</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:hide_related</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:'&amp;amp;show_comments='</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:show_comments</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:'&amp;amp;show_user='</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:show_user</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:'&amp;amp;show_reposts='</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:show_reposts</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:'&amp;amp;visual='</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">capture</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">append:visual</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcapture</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">

</span><span class="err">&lt;iframe</span><span class="w"> </span><span class="err">class='embed-responsive-item'</span><span class="w"> </span><span class="err">src=</span><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="p">}</span><span class="err">}&gt;&lt;/iframe&gt;</span><span class="w">
</span></code></pre>
</div>

<p>Yes, I realise that this is still pretty unwieldy, but <a href="http://liquidmarkup.org/">Liquid</a> seems to have a grudge against elegant string-building (or I’ve missed something). Whatever, you can feed this with the <em>id</em> of a SoundCloud track:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">sound.html</span><span class="w"> </span><span class="err">id</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">'173701811'</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>and get back a nice embeddable iframe <em>which seems to work everywhere</em>. (Incidentally, I’ve only been able to find the track id buried in the embed iframe line from SoundCloud, am I missing something else?).</p>

<h2 id="help-yourself">Help yourself</h2>

<p>All of the code driving this site is <a href="https://github.com/rawfunkmaharishi/rawfunkmaharishi.github.io/blob/master/LICENSE.md">MIT Licensed</a>, so as with the <a href="http://rawfunkmaharishi.uk/blog/2014/11/10/embedding-open-street-map/">OpenStreetMap embed</a>, please feel free to use this <em>_include</em> file in your own Jekyll sites (or help me make it redundant by showing me how I’m misunderstanding oEmbed!)</p>

      
    </div>
    <div class='footer '>
  <div class='text-center bottom links'>
    
      <a href='https://twitter.com/uncookedfunk' title='Twitter'><i class='fa fa-twitter'></i><span class='hidden-xs'> Twitter</span></a>
      
        |
      
    
      <a href='https://facebook.com/rawfunkmaharishi' title='Facebook'><i class='fa fa-facebook-square'></i><span class='hidden-xs'> Facebook</span></a>
      
        |
      
    
      <a href='https://soundcloud.com/rawfunkmaharishi' title='Soundcloud'><i class='fa fa-soundcloud'></i><span class='hidden-xs'> Soundcloud</span></a>
      
        |
      
    
      <a href='https://vimeo.com/rawfunkmaharishi' title='Vimeo'><i class='fa fa-vimeo-square'></i><span class='hidden-xs'> Vimeo</span></a>
      
        |
      
    
      <a href='http://flickr.com/photos/rawfunkmaharishi/' title='Flickr'><i class='fa fa-flickr'></i><span class='hidden-xs'> Flickr</span></a>
      
        |
      
    
      <a href='https://github.com/rawfunkmaharishi/' title='Github'><i class='fa fa-github'></i><span class='hidden-xs'> Github</span></a>
      
        |
      
    
      <a href='/blog/' title='Developer blog'><i class='fa fa-code'></i><span class='hidden-xs'> Developer blog</span></a>
      
        |
      
    
      <a href='http://data.rawfunkmaharishi.uk/' title='Data API'><i class='fa fa-database'></i><span class='hidden-xs'> Data API</span></a>
      
    
  </div>
  <div class='text-center'>
  <span class='attribution'>
    Background image: remixed from
    <a href='https://www.flickr.com/photos/thomashawk/9280743142/'>Sidewalks of New York</a>
    by
    <a href='https://www.flickr.com/photos/thomashawk/'>Thomas Hawk</a> -
    <a href='https://creativecommons.org/licenses/by-nc/2.0'>CC-BY-NC</a>
  </span>
</div>

</div>

  </body>
</html>
