<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
<meta http-equiv='X-UA-Compatible' content='IE=edge' />
<meta name='viewport' content='width=device-width, initial-scale=1' />

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js'></script>
  <script src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js'></script>
<![endif]-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56995544-1', 'auto');
  ga('send', 'pageview');

</script>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src='/javascript/bootstrap.js'></script>


    <link rel='icon' type='image/png' href='/assets/favicon.ico' />
    <link rel='stylesheet' href='/assets/application.css' type='text/css' />
    <style></style>
    
    
    <title>Embedding OpenStreetmap</title>

    





<meta property="og:title" content="Raw Funk Maharishi » Embedding OpenStreetmap" />
<meta property="og:site_name" content="Raw Funk Maharishi" />
<meta property="og:url" content="http://rawfunkmaharishi.uk/blog/2014/11/10/embedding-open-street-map/" />
<meta property="og:description" content="Raw Funk Maharishi, exploring the deep funk grooves of the 70s, fused with improvised avant-groove jams" />
<meta property="og:type" content="article" />
<meta property="og:image" content="http://rawfunkmaharishi.uk/assets/images/logos/wide/header_green.png" />


  </head>

  <body>
    
      <div class='header '>
  <div class='container header-container'>
    <div class='row'>
      <div class='col-md-4 col-md-push-8'>
        <nav class='navbar navbar-default' role='navigation'>
  <!-- Brand and toggle get grouped for better mobile display -->
<div class='navbar-header'>
  <button type='button' class='navbar-toggle collapsed' data-toggle='collapse' data-target='#navbar-collapse'>
    <span class='sr-only'>Toggle navigation</span>
    <span class='icon-bar'></span>
    <span class='icon-bar'></span>
    <span class='icon-bar'></span>
  </button>
</div>

  <div class='collapse navbar-collapse' id='navbar-collapse'>

    <!-- mobile -->
    <ul class='nav hidden-md hidden-lg mobile' role='tablist'>
      
        <li>
  <a href='/the-band/'>The Band</a>
</li>

      
        <li>
  <a href='/sounds/'>Sounds</a>
</li>

      
        <li>
  <a href='/pictures/'>Pictures</a>
</li>

      
        <li>
  <a href='/videos/'>Videos</a>
</li>

      
        <li>
  <a href='/gigs/'>Gigs</a>
</li>

      
        <li>
  <a href='/book-the-band/'>Bookings</a>
</li>

      
        <li>
  <a href='/feedback/'>Reviews</a>
</li>

      
        <li>
  <a href='/merchandise/'>Merchandise</a>
</li>

      
        <li>
  <a href='/licensing/'>Licensing</a>
</li>

      
    </ul>

    <!-- desktop -->
    <ul class='nav nav-stacked nav-pills pull-right hidden-xs hidden-sm' role='tablist'>
      
        <li>
  <a href='/the-band/'>The Band</a>
</li>

      
        <li>
  <a href='/sounds/'>Sounds</a>
</li>

      
        <li>
  <a href='/pictures/'>Pictures</a>
</li>

      
        <li>
  <a href='/videos/'>Videos</a>
</li>

      
        <li>
  <a href='/gigs/'>Gigs</a>
</li>

      
        <li>
  <a href='/book-the-band/'>Bookings</a>
</li>

      
        <li>
  <a href='/feedback/'>Reviews</a>
</li>

      
        <li>
  <a href='/merchandise/'>Merchandise</a>
</li>

      
        <li>
  <a href='/licensing/'>Licensing</a>
</li>

      
    </ul>
  </div>
</nav>

      </div>

      <div class='col-md-8 col-md-pull-4 hidden-sm'>
        <a href='/'>
          <img src='/assets/images/logos/wide/banner.png' alt='Raw Funk Maharishi' class='logo'/>
        </a>
      </div>

      <div class='col-md-8 col-md-pull-4 visible-sm'>
        <a href='/'>
          <img src='/assets/images/logos/wide/banner.png' alt='Raw Funk Maharishi' class='little-logo'/>
        </a>
      </div>
    </div>
  </div>
</div>

    
    
    <div class='container'>
      
        
        
        <h1 class='main-title'>Embedding OpenStreetmap</h1>
      
      <p>This is a band site, which means it has <a href="http://rawfunkmaharishi.uk/gigs/">gig pages</a>, and a good <a href="http://rawfunkmaharishi.uk/gigs/2014/12/04/buffalo-bar/">gig page</a> has an embedded map. We could use Google Maps, sure, but <a href="http://www.openstreetmap.org/">OpenStreetMap</a> has a <a href="http://www.openstreetmap.org/copyright">much more appealing license</a>. So our choices are:</p>

<h2 id="embed-the-whole-thing">Embed the whole thing</h2>

<p>My first move was just to locate the place in the browser, click ‘share’ on the right-hand-side, and paste the full HTML for the iframe into the <a href="https://github.com/rawfunkmaharishi/rawfunkmaharishi.github.io/blob/master/gigs/_posts/HOW_TO_BOOK_THE_BAND.md">gig data</a>. This works, but it’s a really, really terrible solution. So then I looked at</p>

<h2 id="leafletjs">Leaflet.js</h2>

<p>People tell me this is great, but what I know about JavaScript would fit on the back of a matchbox. I hacked around with it for a while and was unable to produce anything useful. If you can show me how to Leaflet, I am of course <a href="https://github.com/rawfunkmaharishi/rawfunkmaharishi.github.io/pulls">accepting pull-requests</a>, but pragmatism led me on towards</p>

<h2 id="my-openlayers-include-thing">My OpenLayers <em>_include</em> thing</h2>

<p>I strapped on the bamboo headphones and Cargo-Culted my way to <a href="https://github.com/rawfunkmaharishi/rawfunkmaharishi.github.io/blob/master/_includes/map.html">this</a>. I <em>kind of</em> understand what it’s doing, but some of it is still utterly impenetrable to me. The important thing, however, is that all of the ugliness is trapped in this one file, and we can generate an <a href="http://rawfunkmaharishi.uk/gigs/2014/12/04/buffalo-bar/">embeddable map, complete with a pin</a>, with just a <a href="https://github.com/rawfunkmaharishi/rawfunkmaharishi.github.io/blob/master/gigs/_posts/2014-12-04-buffalo-bar.yml#L5-L6">latitude and a longitude</a>, which are easily extracted from an <a href="http://www.openstreetmap.org/#map=18/51.54610/-0.10330">OpenStreetMap URL</a></p>

<h2 id="how-to-use-it">How to use it</h2>

<p>As you can see from <a href="https://github.com/rawfunkmaharishi/rawfunkmaharishi.github.io/blob/master/_layouts/gig.html#L37-L39">this</a>, you can embed a map with simple call like this:</p>

<p><code class="highlighter-rouge"><span class="w">
</span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">map.html</span><span class="w"> </span><span class="err">latitude</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">'51.49055'</span><span class="w"> </span><span class="err">longitude</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">'-0.22406'</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="w">
</span></code></p>

<h2 id="help-yourself">Help yourself</h2>

<p>All of the code driving this site is <a href="https://github.com/rawfunkmaharishi/rawfunkmaharishi.github.io/blob/master/LICENSE.md">MIT Licensed</a>, so please feel free to use this <em>_include</em> file in your own Jekyll sites (or help me make it obsolete by replacing it with Leaflet!)</p>

      
    </div>
    <div class='footer '>
  <div class='text-center bottom links'>
    
      <a href='https://twitter.com/uncookedfunk' title='Twitter'><i class='fa fa-twitter'></i><span class='hidden-xs'> Twitter</span></a>
      
        |
      
    
      <a href='https://facebook.com/rawfunkmaharishi' title='Facebook'><i class='fa fa-facebook-square'></i><span class='hidden-xs'> Facebook</span></a>
      
        |
      
    
      <a href='https://soundcloud.com/rawfunkmaharishi' title='Soundcloud'><i class='fa fa-soundcloud'></i><span class='hidden-xs'> Soundcloud</span></a>
      
        |
      
    
      <a href='https://vimeo.com/rawfunkmaharishi' title='Vimeo'><i class='fa fa-vimeo-square'></i><span class='hidden-xs'> Vimeo</span></a>
      
        |
      
    
      <a href='http://flickr.com/photos/rawfunkmaharishi/' title='Flickr'><i class='fa fa-flickr'></i><span class='hidden-xs'> Flickr</span></a>
      
        |
      
    
      <a href='https://github.com/rawfunkmaharishi/' title='Github'><i class='fa fa-github'></i><span class='hidden-xs'> Github</span></a>
      
        |
      
    
      <a href='/blog/' title='Developer blog'><i class='fa fa-code'></i><span class='hidden-xs'> Developer blog</span></a>
      
        |
      
    
      <a href='http://data.rawfunkmaharishi.uk/' title='Data API'><i class='fa fa-database'></i><span class='hidden-xs'> Data API</span></a>
      
    
  </div>
  <div class='text-center'>
  <span class='attribution'>
    Background image: remixed from
    <a href='https://www.flickr.com/photos/thomashawk/9280743142/'>Sidewalks of New York</a>
    by
    <a href='https://www.flickr.com/photos/thomashawk/'>Thomas Hawk</a> -
    <a href='https://creativecommons.org/licenses/by-nc/2.0'>CC-BY-NC</a>
  </span>
</div>

</div>

  </body>
</html>
